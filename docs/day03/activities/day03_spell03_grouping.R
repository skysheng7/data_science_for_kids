# ðŸ”® Day 3 - Spell 3: Grouping and Counting Magic

# Learn to sort data into groups and count things!
# Like sorting candy by color and counting each pile

########################################################
# Step 1: Load data and tools

library(dplyr)
creature_data <- read.csv("../datasetss/creatures.csv")
print("ðŸŽ‰ Ready to group and count creatures!")

########################################################
# Step 2: GROUP BY Magic - Sort into piles

# ðŸ’¡ What is GROUP BY?
# It's like sorting your candy by color - all reds together, all blues together!

# Group creatures by their type and count how many of each
creature_counts <- creature_data %>%
  group_by(creature_type) %>%
  summarize(count = n())

print("ðŸ“Š How many of each creature type:")
print(creature_counts)

########################################################
# Step 3: MUTATE Magic - Create new information

# ðŸ’¡ What is MUTATE?
# It's like adding a new sticker to each trading card
# You create something new based on what's already there!

# Add a column for power category
creatures_with_category <- mutate(creature_data,
                                 power_category = ifelse(magic_power >= 8, "high", "low"))

print("âš¡ Creatures with power category:")
print(creatures_with_category)

########################################################
# Step 4: More grouping examples

# Find the average magic level for each creature type
magic_by_type <- creature_data %>%
  group_by(creature_type) %>%
  summarize(average_magic = mean(magic_power))

print("âš¡ Average magic by creature type:")
print(magic_by_type)

########################################################
# ðŸŽˆ Your turn to practice!

# Challenge 1: Create a new column called "age_group"
# If creature_age > 100, it should say "Old", otherwise "Young"
# YOUR CODE HERE:
creatures_with_age_group <- mutate(creature_data, 
                                   age_group = ...)

# Challenge 2: Group by age_group and count how many creatures are in each group
# YOUR CODE HERE:
age_counts <- creatures_with_age_group %>%
   group_by(...) %>%
   summarize(...)

########################################################
# ðŸ’¡ Memory Tip:
# group_by() = sort into groups (like sorting candy)
# summarize() = count or calculate for each group
# mutate() = add new information to each row
# n() = counts how many items in each group
# mean() = calculates the average